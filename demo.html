<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TagsInput.js — Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Syne:wght@400;600;700;800&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #0d0d0d;
      --surface: #161616;
      --border: #2a2a2a;
      --accent: #e8ff47;
      --accent2: #47c8ff;
      --accent3: #ff6b6b;
      --text: #f0f0f0;
      --muted: #666;
      --radius: 6px;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'IBM Plex Mono', monospace;
      min-height: 100vh;
      padding: 60px 24px;
    }

    header {
      max-width: 820px;
      margin: 0 auto 64px;
    }

    header h1 {
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      font-size: clamp(2.4rem, 5vw, 4rem);
      line-height: 1;
      letter-spacing: -0.02em;
    }

    header h1 span {
      color: var(--accent);
    }

    header p {
      margin-top: 14px;
      color: var(--muted);
      font-size: 0.85rem;
      line-height: 1.7;
      max-width: 500px;
    }

    .demo-grid {
      max-width: 820px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 48px;
    }

    .demo-block {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 32px;
    }

    .demo-block h2 {
      font-family: 'Syne', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 6px;
    }

    .demo-block p.desc {
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .output {
      margin-top: 16px;
      font-size: 0.75rem;
      color: var(--muted);
      background: #0d0d0d;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 10px 14px;
      min-height: 36px;
    }

    .output strong {
      color: var(--accent2);
    }

    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }

    button {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.72rem;
      padding: 6px 14px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
      cursor: pointer;
      transition: all 0.15s;
    }

    button:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    button.danger:hover {
      border-color: var(--accent3);
      color: var(--accent3);
    }
  </style>
  <link rel="stylesheet" href="tagsinput.css">
</head>

<body>

  <header>
    <h1>Tags<span>Input</span>.js</h1>
    <p>Plugin vanilla JS pour la gestion de champs tags — sans dépendance, entièrement configurable, avec validation
      personnalisée et API complète.</p>
  </header>

  <div class="demo-grid">

    <!-- Démo 1 : basique -->
    <div class="demo-block">
      <h2>Basique</h2>
      <p class="desc">Séparateur virgule ou Entrée. Backspace supprime le dernier tag. Pas de doublons.</p>
      <div class="tags-wrapper-rel">
        <input type="text" id="basic" placeholder="Ajouter un tag…">
      </div>
      <div class="output" id="basic-out"><strong>tags:</strong> []</div>
      <div class="actions">
        <button onclick="basicInstance.add('javascript')">+ "javascript"</button>
        <button onclick="basicInstance.add('css')">+ "css"</button>
        <button onclick="basicInstance.remove('css')" class="danger">- "css"</button>
        <button onclick="basicInstance.clear()" class="danger">Clear all</button>
        <button onclick="updateOut('basic-out', basicInstance.getTags())">getTags()</button>
      </div>
    </div>

    <!-- Démo 2 : validation personnalisée -->
    <div class="demo-block">
      <h2>Validation personnalisée</h2>
      <p class="desc">Tags emails uniquement. Min 3 chars, max 60. Interdit les doublons case-insensitive. Secoue le
        champ si invalide.</p>
      <div class="tags-wrapper-rel">
        <input type="text" id="validated" placeholder="email@exemple.com">
      </div>
      <div class="output" id="validated-out"><strong>tags:</strong> []</div>
    </div>

    <!-- Démo 3 : suggestions -->
    <div class="demo-block">
      <h2>Autocomplete / Suggestions</h2>
      <p class="desc">Liste de suggestions filtrée à la saisie. Navigation clavier (↑↓ + Entrée).</p>
      <div class="tags-wrapper-rel">
        <input type="text" id="suggest" placeholder="Commencez à taper…">
      </div>
      <div class="output" id="suggest-out"><strong>tags:</strong> []</div>
    </div>

    <!-- Démo 4 : max tags + thème bleu -->
    <div class="demo-block">
      <h2>Max tags + thème</h2>
      <p class="desc">Limité à 4 tags. Le champ se verrouille au maximum. Thème "blue".</p>
      <div class="tags-wrapper-rel">
        <input type="text" id="limited" placeholder="Max 4 tags…">
      </div>
      <div class="output" id="limited-out"><strong>tags:</strong> []</div>
      <div class="actions">
        <button
          onclick="limitedInstance.fill(['alpha','beta','gamma','delta'])">fill(['alpha','beta','gamma','delta'])</button>
        <button onclick="limitedInstance.clear()" class="danger">Clear</button>
      </div>
    </div>

    <!-- Démo 5 : readonly & toggle -->
    <div class="demo-block">
      <h2>Readonly / Disabled / Replace</h2>
      <p class="desc">Contrôle d'état et remplacement programmatique.</p>
      <div class="tags-wrapper-rel">
        <input type="text" id="state" placeholder="Tags…">
      </div>
      <div class="output" id="state-out"><strong>tags:</strong> []</div>
      <div class="actions">
        <button onclick="stateInstance.setReadonly(true)">setReadonly(true)</button>
        <button onclick="stateInstance.setReadonly(false)">setReadonly(false)</button>
        <button onclick="stateInstance.setDisabled(true)" class="danger">setDisabled(true)</button>
        <button onclick="stateInstance.setDisabled(false)">setDisabled(false)</button>
        <button onclick="stateInstance.replace(['foo','bar','baz'])">replace(['foo','bar','baz'])</button>
        <button onclick="updateOut('state-out', stateInstance.getTags())">getTags()</button>
        <button onclick="updateOut('state-out', stateInstance.count()+' tags')">count()</button>
      </div>
    </div>

  </div>

  <hr class="api-divider" style="max-width:820px;margin:60px auto 40px;">

  <div class="api-section">
    <h2>API <span>Reference</span></h2>
    <div class="method-list">
      <div class="method-item"><code>add(value)</code><span class="badge">→ boolean</span>
        <p>Ajoute un tag. Retourne true si ajouté, false si rejeté (validation / doublon / max).</p>
      </div>
      <div class="method-item"><code>remove(value)</code><span class="badge">→ boolean</span>
        <p>Supprime un tag par valeur exacte.</p>
      </div>
      <div class="method-item"><code>removeAt(index)</code><span class="badge">→ boolean</span>
        <p>Supprime un tag par index (0-based).</p>
      </div>
      <div class="method-item"><code>getTags()</code><span class="badge">→ string[]</span>
        <p>Retourne une copie du tableau de tags.</p>
      </div>
      <div class="method-item"><code>fill(array)</code><span class="badge">→ void</span>
        <p>Remplace tous les tags par ceux du tableau (validation appliquée).</p>
      </div>
      <div class="method-item"><code>replace(array)</code><span class="badge">→ void</span>
        <p>Alias de fill(). Vide d'abord, puis injecte.</p>
      </div>
      <div class="method-item"><code>clear()</code><span class="badge">→ void</span>
        <p>Supprime tous les tags.</p>
      </div>
      <div class="method-item"><code>has(value)</code><span class="badge">→ boolean</span>
        <p>Teste si un tag est présent.</p>
      </div>
      <div class="method-item"><code>count()</code><span class="badge">→ number</span>
        <p>Nombre de tags actuels.</p>
      </div>
      <div class="method-item"><code>setReadonly(bool)</code><span class="badge">→ void</span>
        <p>Passe en mode lecture seule (affichage des tags, pas de saisie, pas de suppression).</p>
      </div>
      <div class="method-item"><code>setDisabled(bool)</code><span class="badge">→ void</span>
        <p>Désactive complètement le champ (opacité réduite).</p>
      </div>
      <div class="method-item"><code>focus()</code><span class="badge">→ void</span>
        <p>Met le focus sur l'input interne.</p>
      </div>
      <div class="method-item"><code>reset()</code><span class="badge">→ void</span>
        <p>Remet l'instance à son état initial (tags initiaux).</p>
      </div>
      <div class="method-item"><code>on(event, fn)</code><span class="badge">→ void</span>
        <p>Écoute un événement : <em>add</em>, <em>remove</em>, <em>invalid</em>, <em>max</em>, <em>clear</em>,
          <em>change</em>.</p>
      </div>
      <div class="method-item"><code>off(event, fn)</code><span class="badge">→ void</span>
        <p>Désabonne un handler.</p>
      </div>
      <div class="method-item"><code>destroy()</code><span class="badge">→ void</span>
        <p>Détruit l'instance et restaure l'input original.</p>
      </div>
    </div>
  </div>

  <script src="tagsinput.js"></script>
  <script>
    /* ============================================================
       DÉMOS
    ============================================================ */

    function updateOut(id, val) {
      const el = document.getElementById(id);
      const str = Array.isArray(val) ? JSON.stringify(val) : val;
      el.innerHTML = '<strong>result:</strong> ' + str;
    }

    // --- Basique ---
    const basicInstance = new TagsInput('#basic', {
      initialTags: ['html', 'css'],
      placeholder: 'Ajouter un tag…',
    });
    basicInstance.on('change', ({ tags }) => {
      document.getElementById('basic-out').innerHTML = '<strong>tags:</strong> ' + JSON.stringify(tags);
    });

    // --- Validation email ---
    const validatedInstance = new TagsInput('#validated', {
      placeholder: 'email@exemple.com',
      minLength: 5,
      maxLength: 60,
      caseSensitive: false,
      allowDuplicates: false,
      validate(value) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
      },
      transform(v) { return v.trim().toLowerCase(); },
    });
    validatedInstance.on('change', ({ tags }) => {
      document.getElementById('validated-out').innerHTML = '<strong>tags:</strong> ' + JSON.stringify(tags);
    });
    validatedInstance.on('invalid', ({ value }) => {
      document.getElementById('validated-out').innerHTML = '<strong style="color:#ff6b6b">invalide:</strong> "' + value + '" n\'est pas un email valide';
    });

    // --- Suggestions ---
    const suggestInstance = new TagsInput('#suggest', {
      placeholder: 'Langage, framework…',
      suggestions: [
        'JavaScript', 'TypeScript', 'Python', 'Rust', 'Go', 'Java', 'PHP', 'Ruby', 'Swift', 'Kotlin',
        'React', 'Vue', 'Angular', 'Svelte', 'Next.js', 'Nuxt', 'Django', 'Laravel', 'Spring', 'Rails',
        'CSS', 'Sass', 'Tailwind', 'GraphQL', 'REST', 'Docker', 'Kubernetes',
      ],
      suggestionsLimit: 6,
    });
    suggestInstance.on('change', ({ tags }) => {
      document.getElementById('suggest-out').innerHTML = '<strong>tags:</strong> ' + JSON.stringify(tags);
    });

    // --- Limited / thème ---
    const limitedInstance = new TagsInput('#limited', {
      placeholder: 'Max 4 tags…',
      maxTags: 4,
      theme: 'blue',
    });
    limitedInstance.on('change', ({ tags }) => {
      document.getElementById('limited-out').innerHTML = '<strong>tags:</strong> ' + JSON.stringify(tags);
    });
    limitedInstance.on('max', () => {
      document.getElementById('limited-out').innerHTML = '<strong style="color:#ff6b6b">max atteint</strong> (4 tags maximum)';
    });

    // --- State control ---
    const stateInstance = new TagsInput('#state', {
      initialTags: ['exemple'],
      theme: 'red',
    });
    stateInstance.on('change', ({ tags }) => {
      document.getElementById('state-out').innerHTML = '<strong>tags:</strong> ' + JSON.stringify(tags);
    });
  </script>
</body>

</html>